<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><title>消息队列(MQ) | 空山木巷</title><meta name="description" content="">
    <link rel="preload" href="/blog/assets/style-90eac310.css" as="style"><link rel="stylesheet" href="/blog/assets/style-90eac310.css">
    <link rel="modulepreload" href="/blog/assets/app-66d6b4fd.js"><link rel="modulepreload" href="/blog/assets/index.html-4751f011.js"><link rel="modulepreload" href="/blog/assets/index.html-31a96e3c.js"><link rel="prefetch" href="/blog/assets/index.html-33f7dfbb.js" as="script"><link rel="prefetch" href="/blog/assets/分布式事务.html-99ca016c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-67c923f9.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-c0e7ceff.js" as="script"><link rel="prefetch" href="/blog/assets/Redis缓存.html-988c20bf.js" as="script"><link rel="prefetch" href="/blog/assets/SaaS多租户.html-0b4298a2.js" as="script"><link rel="prefetch" href="/blog/assets/功能权限.html-1a5bbea9.js" as="script"><link rel="prefetch" href="/blog/assets/幂等性（防重复提交）.html-43a94299.js" as="script"><link rel="prefetch" href="/blog/assets/数据库 MyBatis.html-0283d0f0.js" as="script"><link rel="prefetch" href="/blog/assets/数据权限.html-06e84b51.js" as="script"><link rel="prefetch" href="/blog/assets/本地缓存.html-b0021a15.js" as="script"><link rel="prefetch" href="/blog/assets/消息队列.html-b31ff32c.js" as="script"><link rel="prefetch" href="/blog/assets/用户认证.html-9edb96f7.js" as="script"><link rel="prefetch" href="/blog/assets/系统日志.html-6f65c9c7.js" as="script"><link rel="prefetch" href="/blog/assets/统一响应和异常处理（错误码）.html-48753ae0.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f3cba283.js" as="script"><link rel="prefetch" href="/blog/assets/1-MySQL常用的命令.html-ee92d52b.js" as="script"><link rel="prefetch" href="/blog/assets/13-责任链模式.html-ecb3744d.js" as="script"><link rel="prefetch" href="/blog/assets/14-命令模式.html-5eb58d88.js" as="script"><link rel="prefetch" href="/blog/assets/15-解析器模式.html-96606363.js" as="script"><link rel="prefetch" href="/blog/assets/16-迭代器模式.html-8ebf1e59.js" as="script"><link rel="prefetch" href="/blog/assets/17-中介者模式.html-a0f26b82.js" as="script"><link rel="prefetch" href="/blog/assets/18-备忘录模式.html-37ec7801.js" as="script"><link rel="prefetch" href="/blog/assets/19-观察者模式.html-68ace6a1.js" as="script"><link rel="prefetch" href="/blog/assets/20-状态模式.html-a5f78c82.js" as="script"><link rel="prefetch" href="/blog/assets/21-策略模式.html-a0ea40f7.js" as="script"><link rel="prefetch" href="/blog/assets/22-模板方法模式.html-f1f66b72.js" as="script"><link rel="prefetch" href="/blog/assets/23-访问者模式.html-cd09056c.js" as="script"><link rel="prefetch" href="/blog/assets/1-单例模式.html-5e97ccb1.js" as="script"><link rel="prefetch" href="/blog/assets/2-抽象工厂模式.html-2a70948c.js" as="script"><link rel="prefetch" href="/blog/assets/3-工厂方法模式.html-88c631dd.js" as="script"><link rel="prefetch" href="/blog/assets/4-建造者模式.html-210f3d70.js" as="script"><link rel="prefetch" href="/blog/assets/5-原型模式.html-e37c22fb.js" as="script"><link rel="prefetch" href="/blog/assets/10-桥接模式.html-bb899021.js" as="script"><link rel="prefetch" href="/blog/assets/11-组合模式.html-608f7edb.js" as="script"><link rel="prefetch" href="/blog/assets/12-享元模式.html-7eb14c96.js" as="script"><link rel="prefetch" href="/blog/assets/6-适配器模式.html-42ada3ad.js" as="script"><link rel="prefetch" href="/blog/assets/7-装饰器模式.html-8765fae1.js" as="script"><link rel="prefetch" href="/blog/assets/8-外观模式.html-0103ad00.js" as="script"><link rel="prefetch" href="/blog/assets/9-代理模式.html-72f08df8.js" as="script"><link rel="prefetch" href="/blog/assets/UML类图.html-56387884.js" as="script"><link rel="prefetch" href="/blog/assets/1-Java8新特性概述.html-adb6e16e.js" as="script"><link rel="prefetch" href="/blog/assets/10-Stream API的中间操作.html-dcbf3f12.js" as="script"><link rel="prefetch" href="/blog/assets/11-Stream API的终止操作.html-cc9d125f.js" as="script"><link rel="prefetch" href="/blog/assets/12-Optional类.html-c4d2ef31.js" as="script"><link rel="prefetch" href="/blog/assets/13-接口中的默认方法和静态方法.html-f470ea46.js" as="script"><link rel="prefetch" href="/blog/assets/14-新日期时间API.html-dcbed7d9.js" as="script"><link rel="prefetch" href="/blog/assets/15-重复注解与类型注解.html-f2f3eca7.js" as="script"><link rel="prefetch" href="/blog/assets/2-引入Lambda表达式.html-e6241b21.js" as="script"><link rel="prefetch" href="/blog/assets/3-Lambda表达式基础语法.html-26b78f6c.js" as="script"><link rel="prefetch" href="/blog/assets/4-Lambda表达式典型案例.html-0dca302e.js" as="script"><link rel="prefetch" href="/blog/assets/5-函数式接口.html-95fa5e28.js" as="script"><link rel="prefetch" href="/blog/assets/6-Java7和Java8的HashMap.html-1eb0c9da.js" as="script"><link rel="prefetch" href="/blog/assets/7-方法引用和构造器引用.html-f6d10b42.js" as="script"><link rel="prefetch" href="/blog/assets/8-Stream API基础.html-90d2d127.js" as="script"><link rel="prefetch" href="/blog/assets/9-Stream API的创建案例.html-1f13fad9.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ入门.html-c20c90f0.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ部署指南.html-6d5dea63.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ高级.html-713abb8b.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQ简介.html-df81724a.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQ部署指南.html-34d27c15.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQ问题与解决.html-c596414a.js" as="script"><link rel="prefetch" href="/blog/assets/SpringBoot RocketMQ入门.html-d4ef1d3d.js" as="script"><link rel="prefetch" href="/blog/assets/Docker安装.html-299af5cc.js" as="script"><link rel="prefetch" href="/blog/assets/Docker实用篇.html-52d0916d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e263db13.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9dd24a6d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0d946030.js" as="script"><link rel="prefetch" href="/blog/assets/Linux虚拟机克隆.html-b438ca2c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-dd625d67.js" as="script"><link rel="prefetch" href="/blog/assets/VMware安装CentOS7.html-a73884c0.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e2ad7188.js" as="script"><link rel="prefetch" href="/blog/assets/分布式事务.html-794c1916.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-98e4866e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-2fb772ff.js" as="script"><link rel="prefetch" href="/blog/assets/Redis缓存.html-bd0daed9.js" as="script"><link rel="prefetch" href="/blog/assets/SaaS多租户.html-a2055fe0.js" as="script"><link rel="prefetch" href="/blog/assets/功能权限.html-2d8aaacc.js" as="script"><link rel="prefetch" href="/blog/assets/幂等性（防重复提交）.html-0534ba04.js" as="script"><link rel="prefetch" href="/blog/assets/数据库 MyBatis.html-e382d2a7.js" as="script"><link rel="prefetch" href="/blog/assets/数据权限.html-a5caa49b.js" as="script"><link rel="prefetch" href="/blog/assets/本地缓存.html-f2290b7c.js" as="script"><link rel="prefetch" href="/blog/assets/消息队列.html-a6146d9a.js" as="script"><link rel="prefetch" href="/blog/assets/用户认证.html-9d064fff.js" as="script"><link rel="prefetch" href="/blog/assets/系统日志.html-ee40ac2f.js" as="script"><link rel="prefetch" href="/blog/assets/统一响应和异常处理（错误码）.html-6de026fa.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-a6895b4b.js" as="script"><link rel="prefetch" href="/blog/assets/1-MySQL常用的命令.html-ca808bbc.js" as="script"><link rel="prefetch" href="/blog/assets/13-责任链模式.html-37bc270e.js" as="script"><link rel="prefetch" href="/blog/assets/14-命令模式.html-565f0606.js" as="script"><link rel="prefetch" href="/blog/assets/15-解析器模式.html-a1e4bfaa.js" as="script"><link rel="prefetch" href="/blog/assets/16-迭代器模式.html-ead46aeb.js" as="script"><link rel="prefetch" href="/blog/assets/17-中介者模式.html-701b63f8.js" as="script"><link rel="prefetch" href="/blog/assets/18-备忘录模式.html-8cf3d53a.js" as="script"><link rel="prefetch" href="/blog/assets/19-观察者模式.html-dfb01611.js" as="script"><link rel="prefetch" href="/blog/assets/20-状态模式.html-e26f4307.js" as="script"><link rel="prefetch" href="/blog/assets/21-策略模式.html-27dc7c89.js" as="script"><link rel="prefetch" href="/blog/assets/22-模板方法模式.html-6eb9e5b2.js" as="script"><link rel="prefetch" href="/blog/assets/23-访问者模式.html-cf79916d.js" as="script"><link rel="prefetch" href="/blog/assets/1-单例模式.html-89e83bdd.js" as="script"><link rel="prefetch" href="/blog/assets/2-抽象工厂模式.html-f9ba82fa.js" as="script"><link rel="prefetch" href="/blog/assets/3-工厂方法模式.html-716e2ec4.js" as="script"><link rel="prefetch" href="/blog/assets/4-建造者模式.html-f9c85e95.js" as="script"><link rel="prefetch" href="/blog/assets/5-原型模式.html-c346c412.js" as="script"><link rel="prefetch" href="/blog/assets/10-桥接模式.html-58973dc7.js" as="script"><link rel="prefetch" href="/blog/assets/11-组合模式.html-8845d578.js" as="script"><link rel="prefetch" href="/blog/assets/12-享元模式.html-4f0564d0.js" as="script"><link rel="prefetch" href="/blog/assets/6-适配器模式.html-ee4a3eab.js" as="script"><link rel="prefetch" href="/blog/assets/7-装饰器模式.html-9da2ce9b.js" as="script"><link rel="prefetch" href="/blog/assets/8-外观模式.html-de9ba17f.js" as="script"><link rel="prefetch" href="/blog/assets/9-代理模式.html-24224643.js" as="script"><link rel="prefetch" href="/blog/assets/UML类图.html-ee48f6ee.js" as="script"><link rel="prefetch" href="/blog/assets/1-Java8新特性概述.html-ba7370a2.js" as="script"><link rel="prefetch" href="/blog/assets/10-Stream API的中间操作.html-ab41c503.js" as="script"><link rel="prefetch" href="/blog/assets/11-Stream API的终止操作.html-579e0275.js" as="script"><link rel="prefetch" href="/blog/assets/12-Optional类.html-2938f6c0.js" as="script"><link rel="prefetch" href="/blog/assets/13-接口中的默认方法和静态方法.html-4376d340.js" as="script"><link rel="prefetch" href="/blog/assets/14-新日期时间API.html-8cef1169.js" as="script"><link rel="prefetch" href="/blog/assets/15-重复注解与类型注解.html-14c69dac.js" as="script"><link rel="prefetch" href="/blog/assets/2-引入Lambda表达式.html-cbb68b73.js" as="script"><link rel="prefetch" href="/blog/assets/3-Lambda表达式基础语法.html-b874571a.js" as="script"><link rel="prefetch" href="/blog/assets/4-Lambda表达式典型案例.html-02ff3862.js" as="script"><link rel="prefetch" href="/blog/assets/5-函数式接口.html-a567c93c.js" as="script"><link rel="prefetch" href="/blog/assets/6-Java7和Java8的HashMap.html-d45c19ee.js" as="script"><link rel="prefetch" href="/blog/assets/7-方法引用和构造器引用.html-5528bf63.js" as="script"><link rel="prefetch" href="/blog/assets/8-Stream API基础.html-716d9e0b.js" as="script"><link rel="prefetch" href="/blog/assets/9-Stream API的创建案例.html-f8bfe8bc.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ入门.html-aa90e61e.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ部署指南.html-ae39e5df.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQ高级.html-ff1c439e.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQ简介.html-734c9b0f.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQ部署指南.html-73952eb6.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQ问题与解决.html-2b150a6b.js" as="script"><link rel="prefetch" href="/blog/assets/SpringBoot RocketMQ入门.html-25974b8e.js" as="script"><link rel="prefetch" href="/blog/assets/Docker安装.html-a0389f48.js" as="script"><link rel="prefetch" href="/blog/assets/Docker实用篇.html-ad5b2634.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-3cba7701.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-646aeed4.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-d3ddc6e3.js" as="script"><link rel="prefetch" href="/blog/assets/Linux虚拟机克隆.html-32214cd3.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-cdeca630.js" as="script"><link rel="prefetch" href="/blog/assets/VMware安装CentOS7.html-4cd1bd26.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-d672d3fd.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="/blog/images/logo.png" alt="空山木巷"><span class="site-name can-hide">空山木巷</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>容器服务</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>开发工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/idea/" class="" aria-label="IDEA"><!--[--><!--]--> IDEA <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/java/java8/1-Java8新特性概述.md" class="" aria-label="java8新特性"><!--[--><!--]--> java8新特性 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="分布式"><span class="title">分布式</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="分布式"><span class="title">分布式</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/distributed/分布式事务.md" class="" aria-label="分布式事务"><!--[--><!--]--> 分布式事务 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/db/mysql/1-MySQL常用的命令.md" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/design-patterns/creational/1-单例模式.md" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></div><div class="navbar-item"><a aria-current="page" href="/blog/mq/" class="router-link-active router-link-exact-active router-link-active" aria-label="消息队列"><!--[--><!--]--> 消息队列 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/kayson/" class="" aria-label="Kayson"><!--[--><!--]--> Kayson <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/seckill/" class="" aria-label="Seckill"><!--[--><!--]--> Seckill <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/jhzhou" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/jh-zhou0" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>容器服务</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>开发工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/idea/" class="" aria-label="IDEA"><!--[--><!--]--> IDEA <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/java/java8/1-Java8新特性概述.md" class="" aria-label="java8新特性"><!--[--><!--]--> java8新特性 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="分布式"><span class="title">分布式</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="分布式"><span class="title">分布式</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/distributed/分布式事务.md" class="" aria-label="分布式事务"><!--[--><!--]--> 分布式事务 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/db/mysql/1-MySQL常用的命令.md" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/design-patterns/creational/1-单例模式.md" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></div><div class="navbar-item"><a aria-current="page" href="/blog/mq/" class="router-link-active router-link-exact-active router-link-active" aria-label="消息队列"><!--[--><!--]--> 消息队列 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/kayson/" class="" aria-label="Kayson"><!--[--><!--]--> Kayson <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/seckill/" class="" aria-label="Seckill"><!--[--><!--]--> Seckill <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/jhzhou" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/jh-zhou0" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">RabbitMQ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/mq/rabbitmq/RabbitMQ部署指南.md" class="sidebar-item" aria-label="RabbitMQ部署指南"><!--[--><!--]--> RabbitMQ部署指南 <!--[--><!--]--></a><!----></li><li><a href="/blog/mq/rabbitmq/RabbitMQ入门.md" class="sidebar-item" aria-label="RabbitMQ入门"><!--[--><!--]--> RabbitMQ入门 <!--[--><!--]--></a><!----></li><li><a href="/blog/mq/rabbitmq/RabbitMQ高级.md" class="sidebar-item" aria-label="RabbitMQ高级"><!--[--><!--]--> RabbitMQ高级 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">RocketMQ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/mq/rocketmq/RocketMQ部署指南.md" class="sidebar-item" aria-label="RocketMQ部署指南"><!--[--><!--]--> RocketMQ部署指南 <!--[--><!--]--></a><!----></li><li><a href="/blog/mq/rocketmq/RocketMQ简介.md" class="sidebar-item" aria-label="RocketMQ简介"><!--[--><!--]--> RocketMQ简介 <!--[--><!--]--></a><!----></li><li><a href="/blog/mq/rocketmq/SpringBoot RocketMQ入门.md" class="sidebar-item" aria-label="SpringBoot RocketMQ入门"><!--[--><!--]--> SpringBoot RocketMQ入门 <!--[--><!--]--></a><!----></li><li><a href="/blog/mq/rocketmq/RocketMQ问题与解决.md" class="sidebar-item" aria-label="RocketMQ问题与解决"><!--[--><!--]--> RocketMQ问题与解决 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Kafka <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="消息队列-mq" tabindex="-1"><a class="header-anchor" href="#消息队列-mq" aria-hidden="true">#</a> 消息队列(MQ)</h1><h2 id="_1-初识mq" tabindex="-1"><a class="header-anchor" href="#_1-初识mq" aria-hidden="true">#</a> 1.初识MQ</h2><h3 id="_1-1同步和异步通讯" tabindex="-1"><a class="header-anchor" href="#_1-1同步和异步通讯" aria-hidden="true">#</a> 1.1同步和异步通讯</h3><p>微服务间通讯有同步和异步两种方式：</p><ul><li><p>同步通讯：就像打电话，需要实时响应。</p></li><li><p>异步通讯：就像发邮件，不需要马上回复。</p></li></ul><p>两种方式各有优劣，打电话可以立即得到响应，但是你却不能跟多个人同时通话。发送邮件可以同时与多个人收发邮件，但是往往响应会有延迟。</p><h4 id="同步通讯" tabindex="-1"><a class="header-anchor" href="#同步通讯" aria-hidden="true">#</a> 同步通讯</h4><p>Feign调用就属于同步方式，虽然调用可以实时得到结果，但存在下面的问题：</p><p><img src="/blog/mq/Snipaste_2023-06-19_14-54-21.png" alt="Snipaste_2023-06-19_14-54-21"></p><p><strong>总结</strong>：</p><p>同步调用的优点：</p><ul><li>时效性较强，可以立即得到结果</li></ul><p>同步调用的问题：</p><ul><li>耦合度高</li><li>性能和吞吐能力下降</li><li>有额外的资源消耗</li><li>有级联失败问题</li></ul><h4 id="异步通讯" tabindex="-1"><a class="header-anchor" href="#异步通讯" aria-hidden="true">#</a> 异步通讯</h4><p>异步调用则可以避免上述问题。</p><p>以购买商品为例，用户支付后需要调用订单服务完成订单状态修改，调用物流服务，从仓库分配响应的库存并准备发货。</p><p>在事件模式中，支付服务是事件发布者（publisher），在支付完成后只需要发布一个支付成功的事件（event），事件中带上订单id。</p><p>订单服务和物流服务是事件订阅者（Consumer），订阅支付成功的事件，监听到事件后完成自己业务即可。</p><p>为了解除事件发布者与订阅者之间的耦合，两者并不是直接通信，而是有一个中间人（Broker）。发布者发布事件到Broker，不关心谁来订阅事件。订阅者从Broker订阅事件，不关心谁发来的消息。</p><p><img src="/blog/mq/Snipaste_2023-06-19_15-00-57.png" alt="Snipaste_2023-06-19_15-00-57"></p><p>好处：</p><ul><li><p>吞吐量提升：无需等待订阅者处理完成，响应更快速</p></li><li><p>故障隔离：服务没有直接调用，不存在级联失败问题</p></li><li><p>调用间没有阻塞，不会造成无效的资源占用</p></li><li><p>耦合度极低，每个服务都可以灵活插拔，可替换</p></li><li><p>流量削峰：不管发布事件的流量波动多大，都由Broker接收，订阅者可以按照自己的速度去处理事件</p></li></ul><p>缺点：</p><ul><li>架构复杂了，业务没有明显的流程线，不好管理</li><li>需要依赖于Broker的可靠、安全、性能</li></ul><h3 id="_1-2技术对比" tabindex="-1"><a class="header-anchor" href="#_1-2技术对比" aria-hidden="true">#</a> 1.2技术对比</h3><p>MQ，中文是消息队列（MessageQueue），字面来看就是存放消息的队列。也就是事件驱动架构中的Broker。</p><p>比较常见的MQ实现：</p><ul><li>ActiveMQ</li><li>RabbitMQ</li><li>RocketMQ</li><li>Kafka</li></ul><table><thead><tr><th></th><th><strong>RabbitMQ</strong></th><th><strong>ActiveMQ</strong></th><th><strong>RocketMQ</strong></th><th><strong>Kafka</strong></th></tr></thead><tbody><tr><td>公司/社区</td><td>Rabbit</td><td>Apache</td><td>阿里</td><td>Apache</td></tr><tr><td>开发语言</td><td>Erlang</td><td>Java</td><td>Java</td><td>Scala&amp;Java</td></tr><tr><td>协议支持</td><td>AMQP，XMPP，SMTP，STOMP</td><td>OpenWire,STOMP，REST,XMPP,AMQP</td><td>自定义协议</td><td>自定义协议</td></tr><tr><td>可用性</td><td>高</td><td>一般</td><td>高</td><td>高</td></tr><tr><td>单机吞吐量</td><td>一般</td><td>差</td><td>高</td><td>非常高</td></tr><tr><td>消息延迟</td><td>微秒级</td><td>毫秒级</td><td>毫秒级</td><td>毫秒以内</td></tr><tr><td>消息可靠性</td><td>高</td><td>一般</td><td>高</td><td>一般</td></tr></tbody></table><p>追求可用性：Kafka、 RocketMQ 、RabbitMQ</p><p>追求可靠性：RabbitMQ、RocketMQ</p><p>追求吞吐能力：RocketMQ、Kafka</p><p>追求消息低延迟：RabbitMQ、Kafka</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-66d6b4fd.js" defer></script>
  </body>
</html>
