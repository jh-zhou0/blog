<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><title>Redis ç¼“å­˜ | ç©ºå±±æœ¨å··</title><meta name="description" content="">
    <link rel="preload" href="/blog/assets/style-90eac310.css" as="style"><link rel="stylesheet" href="/blog/assets/style-90eac310.css">
    <link rel="modulepreload" href="/blog/assets/app-66d6b4fd.js"><link rel="modulepreload" href="/blog/assets/Redisç¼“å­˜.html-bd0daed9.js"><link rel="modulepreload" href="/blog/assets/Redisç¼“å­˜.html-988c20bf.js"><link rel="prefetch" href="/blog/assets/index.html-33f7dfbb.js" as="script"><link rel="prefetch" href="/blog/assets/åˆ†å¸ƒå¼äº‹åŠ¡.html-99ca016c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-67c923f9.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-c0e7ceff.js" as="script"><link rel="prefetch" href="/blog/assets/SaaSå¤šç§Ÿæˆ·.html-0b4298a2.js" as="script"><link rel="prefetch" href="/blog/assets/åŠŸèƒ½æƒé™.html-1a5bbea9.js" as="script"><link rel="prefetch" href="/blog/assets/å¹‚ç­‰æ€§ï¼ˆé˜²é‡å¤æäº¤ï¼‰.html-43a94299.js" as="script"><link rel="prefetch" href="/blog/assets/æ•°æ®åº“ MyBatis.html-0283d0f0.js" as="script"><link rel="prefetch" href="/blog/assets/æ•°æ®æƒé™.html-06e84b51.js" as="script"><link rel="prefetch" href="/blog/assets/æœ¬åœ°ç¼“å­˜.html-b0021a15.js" as="script"><link rel="prefetch" href="/blog/assets/æ¶ˆæ¯é˜Ÿåˆ—.html-b31ff32c.js" as="script"><link rel="prefetch" href="/blog/assets/ç”¨æˆ·è®¤è¯.html-9edb96f7.js" as="script"><link rel="prefetch" href="/blog/assets/ç³»ç»Ÿæ—¥å¿—.html-6f65c9c7.js" as="script"><link rel="prefetch" href="/blog/assets/ç»Ÿä¸€å“åº”å’Œå¼‚å¸¸å¤„ç†ï¼ˆé”™è¯¯ç ï¼‰.html-48753ae0.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-4751f011.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f3cba283.js" as="script"><link rel="prefetch" href="/blog/assets/1-MySQLå¸¸ç”¨çš„å‘½ä»¤.html-ee92d52b.js" as="script"><link rel="prefetch" href="/blog/assets/13-è´£ä»»é“¾æ¨¡å¼.html-ecb3744d.js" as="script"><link rel="prefetch" href="/blog/assets/14-å‘½ä»¤æ¨¡å¼.html-5eb58d88.js" as="script"><link rel="prefetch" href="/blog/assets/15-è§£æå™¨æ¨¡å¼.html-96606363.js" as="script"><link rel="prefetch" href="/blog/assets/16-è¿­ä»£å™¨æ¨¡å¼.html-8ebf1e59.js" as="script"><link rel="prefetch" href="/blog/assets/17-ä¸­ä»‹è€…æ¨¡å¼.html-a0f26b82.js" as="script"><link rel="prefetch" href="/blog/assets/18-å¤‡å¿˜å½•æ¨¡å¼.html-37ec7801.js" as="script"><link rel="prefetch" href="/blog/assets/19-è§‚å¯Ÿè€…æ¨¡å¼.html-68ace6a1.js" as="script"><link rel="prefetch" href="/blog/assets/20-çŠ¶æ€æ¨¡å¼.html-a5f78c82.js" as="script"><link rel="prefetch" href="/blog/assets/21-ç­–ç•¥æ¨¡å¼.html-a0ea40f7.js" as="script"><link rel="prefetch" href="/blog/assets/22-æ¨¡æ¿æ–¹æ³•æ¨¡å¼.html-f1f66b72.js" as="script"><link rel="prefetch" href="/blog/assets/23-è®¿é—®è€…æ¨¡å¼.html-cd09056c.js" as="script"><link rel="prefetch" href="/blog/assets/1-å•ä¾‹æ¨¡å¼.html-5e97ccb1.js" as="script"><link rel="prefetch" href="/blog/assets/2-æŠ½è±¡å·¥å‚æ¨¡å¼.html-2a70948c.js" as="script"><link rel="prefetch" href="/blog/assets/3-å·¥å‚æ–¹æ³•æ¨¡å¼.html-88c631dd.js" as="script"><link rel="prefetch" href="/blog/assets/4-å»ºé€ è€…æ¨¡å¼.html-210f3d70.js" as="script"><link rel="prefetch" href="/blog/assets/5-åŸå‹æ¨¡å¼.html-e37c22fb.js" as="script"><link rel="prefetch" href="/blog/assets/10-æ¡¥æ¥æ¨¡å¼.html-bb899021.js" as="script"><link rel="prefetch" href="/blog/assets/11-ç»„åˆæ¨¡å¼.html-608f7edb.js" as="script"><link rel="prefetch" href="/blog/assets/12-äº«å…ƒæ¨¡å¼.html-7eb14c96.js" as="script"><link rel="prefetch" href="/blog/assets/6-é€‚é…å™¨æ¨¡å¼.html-42ada3ad.js" as="script"><link rel="prefetch" href="/blog/assets/7-è£…é¥°å™¨æ¨¡å¼.html-8765fae1.js" as="script"><link rel="prefetch" href="/blog/assets/8-å¤–è§‚æ¨¡å¼.html-0103ad00.js" as="script"><link rel="prefetch" href="/blog/assets/9-ä»£ç†æ¨¡å¼.html-72f08df8.js" as="script"><link rel="prefetch" href="/blog/assets/UMLç±»å›¾.html-56387884.js" as="script"><link rel="prefetch" href="/blog/assets/1-Java8æ–°ç‰¹æ€§æ¦‚è¿°.html-adb6e16e.js" as="script"><link rel="prefetch" href="/blog/assets/10-Stream APIçš„ä¸­é—´æ“ä½œ.html-dcbf3f12.js" as="script"><link rel="prefetch" href="/blog/assets/11-Stream APIçš„ç»ˆæ­¢æ“ä½œ.html-cc9d125f.js" as="script"><link rel="prefetch" href="/blog/assets/12-Optionalç±».html-c4d2ef31.js" as="script"><link rel="prefetch" href="/blog/assets/13-æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•.html-f470ea46.js" as="script"><link rel="prefetch" href="/blog/assets/14-æ–°æ—¥æœŸæ—¶é—´API.html-dcbed7d9.js" as="script"><link rel="prefetch" href="/blog/assets/15-é‡å¤æ³¨è§£ä¸ç±»å‹æ³¨è§£.html-f2f3eca7.js" as="script"><link rel="prefetch" href="/blog/assets/2-å¼•å…¥Lambdaè¡¨è¾¾å¼.html-e6241b21.js" as="script"><link rel="prefetch" href="/blog/assets/3-Lambdaè¡¨è¾¾å¼åŸºç¡€è¯­æ³•.html-26b78f6c.js" as="script"><link rel="prefetch" href="/blog/assets/4-Lambdaè¡¨è¾¾å¼å…¸å‹æ¡ˆä¾‹.html-0dca302e.js" as="script"><link rel="prefetch" href="/blog/assets/5-å‡½æ•°å¼æ¥å£.html-95fa5e28.js" as="script"><link rel="prefetch" href="/blog/assets/6-Java7å’ŒJava8çš„HashMap.html-1eb0c9da.js" as="script"><link rel="prefetch" href="/blog/assets/7-æ–¹æ³•å¼•ç”¨å’Œæ„é€ å™¨å¼•ç”¨.html-f6d10b42.js" as="script"><link rel="prefetch" href="/blog/assets/8-Stream APIåŸºç¡€.html-90d2d127.js" as="script"><link rel="prefetch" href="/blog/assets/9-Stream APIçš„åˆ›å»ºæ¡ˆä¾‹.html-1f13fad9.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQå…¥é—¨.html-c20c90f0.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQéƒ¨ç½²æŒ‡å—.html-6d5dea63.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQé«˜çº§.html-713abb8b.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQç®€ä»‹.html-df81724a.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQéƒ¨ç½²æŒ‡å—.html-34d27c15.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQé—®é¢˜ä¸è§£å†³.html-c596414a.js" as="script"><link rel="prefetch" href="/blog/assets/SpringBoot RocketMQå…¥é—¨.html-d4ef1d3d.js" as="script"><link rel="prefetch" href="/blog/assets/Dockerå®‰è£….html-299af5cc.js" as="script"><link rel="prefetch" href="/blog/assets/Dockerå®ç”¨ç¯‡.html-52d0916d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e263db13.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9dd24a6d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0d946030.js" as="script"><link rel="prefetch" href="/blog/assets/Linuxè™šæ‹Ÿæœºå…‹éš†.html-b438ca2c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-dd625d67.js" as="script"><link rel="prefetch" href="/blog/assets/VMwareå®‰è£…CentOS7.html-a73884c0.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-e2ad7188.js" as="script"><link rel="prefetch" href="/blog/assets/åˆ†å¸ƒå¼äº‹åŠ¡.html-794c1916.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-98e4866e.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-2fb772ff.js" as="script"><link rel="prefetch" href="/blog/assets/SaaSå¤šç§Ÿæˆ·.html-a2055fe0.js" as="script"><link rel="prefetch" href="/blog/assets/åŠŸèƒ½æƒé™.html-2d8aaacc.js" as="script"><link rel="prefetch" href="/blog/assets/å¹‚ç­‰æ€§ï¼ˆé˜²é‡å¤æäº¤ï¼‰.html-0534ba04.js" as="script"><link rel="prefetch" href="/blog/assets/æ•°æ®åº“ MyBatis.html-e382d2a7.js" as="script"><link rel="prefetch" href="/blog/assets/æ•°æ®æƒé™.html-a5caa49b.js" as="script"><link rel="prefetch" href="/blog/assets/æœ¬åœ°ç¼“å­˜.html-f2290b7c.js" as="script"><link rel="prefetch" href="/blog/assets/æ¶ˆæ¯é˜Ÿåˆ—.html-a6146d9a.js" as="script"><link rel="prefetch" href="/blog/assets/ç”¨æˆ·è®¤è¯.html-9d064fff.js" as="script"><link rel="prefetch" href="/blog/assets/ç³»ç»Ÿæ—¥å¿—.html-ee40ac2f.js" as="script"><link rel="prefetch" href="/blog/assets/ç»Ÿä¸€å“åº”å’Œå¼‚å¸¸å¤„ç†ï¼ˆé”™è¯¯ç ï¼‰.html-6de026fa.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-31a96e3c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-a6895b4b.js" as="script"><link rel="prefetch" href="/blog/assets/1-MySQLå¸¸ç”¨çš„å‘½ä»¤.html-ca808bbc.js" as="script"><link rel="prefetch" href="/blog/assets/13-è´£ä»»é“¾æ¨¡å¼.html-37bc270e.js" as="script"><link rel="prefetch" href="/blog/assets/14-å‘½ä»¤æ¨¡å¼.html-565f0606.js" as="script"><link rel="prefetch" href="/blog/assets/15-è§£æå™¨æ¨¡å¼.html-a1e4bfaa.js" as="script"><link rel="prefetch" href="/blog/assets/16-è¿­ä»£å™¨æ¨¡å¼.html-ead46aeb.js" as="script"><link rel="prefetch" href="/blog/assets/17-ä¸­ä»‹è€…æ¨¡å¼.html-701b63f8.js" as="script"><link rel="prefetch" href="/blog/assets/18-å¤‡å¿˜å½•æ¨¡å¼.html-8cf3d53a.js" as="script"><link rel="prefetch" href="/blog/assets/19-è§‚å¯Ÿè€…æ¨¡å¼.html-dfb01611.js" as="script"><link rel="prefetch" href="/blog/assets/20-çŠ¶æ€æ¨¡å¼.html-e26f4307.js" as="script"><link rel="prefetch" href="/blog/assets/21-ç­–ç•¥æ¨¡å¼.html-27dc7c89.js" as="script"><link rel="prefetch" href="/blog/assets/22-æ¨¡æ¿æ–¹æ³•æ¨¡å¼.html-6eb9e5b2.js" as="script"><link rel="prefetch" href="/blog/assets/23-è®¿é—®è€…æ¨¡å¼.html-cf79916d.js" as="script"><link rel="prefetch" href="/blog/assets/1-å•ä¾‹æ¨¡å¼.html-89e83bdd.js" as="script"><link rel="prefetch" href="/blog/assets/2-æŠ½è±¡å·¥å‚æ¨¡å¼.html-f9ba82fa.js" as="script"><link rel="prefetch" href="/blog/assets/3-å·¥å‚æ–¹æ³•æ¨¡å¼.html-716e2ec4.js" as="script"><link rel="prefetch" href="/blog/assets/4-å»ºé€ è€…æ¨¡å¼.html-f9c85e95.js" as="script"><link rel="prefetch" href="/blog/assets/5-åŸå‹æ¨¡å¼.html-c346c412.js" as="script"><link rel="prefetch" href="/blog/assets/10-æ¡¥æ¥æ¨¡å¼.html-58973dc7.js" as="script"><link rel="prefetch" href="/blog/assets/11-ç»„åˆæ¨¡å¼.html-8845d578.js" as="script"><link rel="prefetch" href="/blog/assets/12-äº«å…ƒæ¨¡å¼.html-4f0564d0.js" as="script"><link rel="prefetch" href="/blog/assets/6-é€‚é…å™¨æ¨¡å¼.html-ee4a3eab.js" as="script"><link rel="prefetch" href="/blog/assets/7-è£…é¥°å™¨æ¨¡å¼.html-9da2ce9b.js" as="script"><link rel="prefetch" href="/blog/assets/8-å¤–è§‚æ¨¡å¼.html-de9ba17f.js" as="script"><link rel="prefetch" href="/blog/assets/9-ä»£ç†æ¨¡å¼.html-24224643.js" as="script"><link rel="prefetch" href="/blog/assets/UMLç±»å›¾.html-ee48f6ee.js" as="script"><link rel="prefetch" href="/blog/assets/1-Java8æ–°ç‰¹æ€§æ¦‚è¿°.html-ba7370a2.js" as="script"><link rel="prefetch" href="/blog/assets/10-Stream APIçš„ä¸­é—´æ“ä½œ.html-ab41c503.js" as="script"><link rel="prefetch" href="/blog/assets/11-Stream APIçš„ç»ˆæ­¢æ“ä½œ.html-579e0275.js" as="script"><link rel="prefetch" href="/blog/assets/12-Optionalç±».html-2938f6c0.js" as="script"><link rel="prefetch" href="/blog/assets/13-æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•.html-4376d340.js" as="script"><link rel="prefetch" href="/blog/assets/14-æ–°æ—¥æœŸæ—¶é—´API.html-8cef1169.js" as="script"><link rel="prefetch" href="/blog/assets/15-é‡å¤æ³¨è§£ä¸ç±»å‹æ³¨è§£.html-14c69dac.js" as="script"><link rel="prefetch" href="/blog/assets/2-å¼•å…¥Lambdaè¡¨è¾¾å¼.html-cbb68b73.js" as="script"><link rel="prefetch" href="/blog/assets/3-Lambdaè¡¨è¾¾å¼åŸºç¡€è¯­æ³•.html-b874571a.js" as="script"><link rel="prefetch" href="/blog/assets/4-Lambdaè¡¨è¾¾å¼å…¸å‹æ¡ˆä¾‹.html-02ff3862.js" as="script"><link rel="prefetch" href="/blog/assets/5-å‡½æ•°å¼æ¥å£.html-a567c93c.js" as="script"><link rel="prefetch" href="/blog/assets/6-Java7å’ŒJava8çš„HashMap.html-d45c19ee.js" as="script"><link rel="prefetch" href="/blog/assets/7-æ–¹æ³•å¼•ç”¨å’Œæ„é€ å™¨å¼•ç”¨.html-5528bf63.js" as="script"><link rel="prefetch" href="/blog/assets/8-Stream APIåŸºç¡€.html-716d9e0b.js" as="script"><link rel="prefetch" href="/blog/assets/9-Stream APIçš„åˆ›å»ºæ¡ˆä¾‹.html-f8bfe8bc.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQå…¥é—¨.html-aa90e61e.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQéƒ¨ç½²æŒ‡å—.html-ae39e5df.js" as="script"><link rel="prefetch" href="/blog/assets/RabbitMQé«˜çº§.html-ff1c439e.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQç®€ä»‹.html-734c9b0f.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQéƒ¨ç½²æŒ‡å—.html-73952eb6.js" as="script"><link rel="prefetch" href="/blog/assets/RocketMQé—®é¢˜ä¸è§£å†³.html-2b150a6b.js" as="script"><link rel="prefetch" href="/blog/assets/SpringBoot RocketMQå…¥é—¨.html-25974b8e.js" as="script"><link rel="prefetch" href="/blog/assets/Dockerå®‰è£….html-a0389f48.js" as="script"><link rel="prefetch" href="/blog/assets/Dockerå®ç”¨ç¯‡.html-ad5b2634.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-3cba7701.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-646aeed4.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-d3ddc6e3.js" as="script"><link rel="prefetch" href="/blog/assets/Linuxè™šæ‹Ÿæœºå…‹éš†.html-32214cd3.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-cdeca630.js" as="script"><link rel="prefetch" href="/blog/assets/VMwareå®‰è£…CentOS7.html-4cd1bd26.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-d672d3fd.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="/blog/images/logo.png" alt="ç©ºå±±æœ¨å··"><span class="site-name can-hide">ç©ºå±±æœ¨å··</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å·¥å…·"><span class="title">å·¥å…·</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å·¥å…·"><span class="title">å·¥å…·</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å®¹å™¨æœåŠ¡</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å¼€å‘å·¥å…·</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/idea/" class="" aria-label="IDEA"><!--[--><!--]--> IDEA <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/java/java8/1-Java8æ–°ç‰¹æ€§æ¦‚è¿°.md" class="" aria-label="java8æ–°ç‰¹æ€§"><!--[--><!--]--> java8æ–°ç‰¹æ€§ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åˆ†å¸ƒå¼"><span class="title">åˆ†å¸ƒå¼</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åˆ†å¸ƒå¼"><span class="title">åˆ†å¸ƒå¼</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/distributed/åˆ†å¸ƒå¼äº‹åŠ¡.md" class="" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡"><!--[--><!--]--> åˆ†å¸ƒå¼äº‹åŠ¡ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ•°æ®åº“"><span class="title">æ•°æ®åº“</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ•°æ®åº“"><span class="title">æ•°æ®åº“</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/db/mysql/1-MySQLå¸¸ç”¨çš„å‘½ä»¤.md" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/design-patterns/creational/1-å•ä¾‹æ¨¡å¼.md" class="" aria-label="è®¾è®¡æ¨¡å¼"><!--[--><!--]--> è®¾è®¡æ¨¡å¼ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/mq/" class="" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><!--[--><!--]--> æ¶ˆæ¯é˜Ÿåˆ— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/kayson/" class="router-link-active" aria-label="Kayson"><!--[--><!--]--> Kayson <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/seckill/" class="" aria-label="Seckill"><!--[--><!--]--> Seckill <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/jhzhou" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/jh-zhou0" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å·¥å…·"><span class="title">å·¥å…·</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å·¥å…·"><span class="title">å·¥å…·</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å®¹å™¨æœåŠ¡</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å¼€å‘å·¥å…·</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/tool/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/tool/idea/" class="" aria-label="IDEA"><!--[--><!--]--> IDEA <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/java/java8/1-Java8æ–°ç‰¹æ€§æ¦‚è¿°.md" class="" aria-label="java8æ–°ç‰¹æ€§"><!--[--><!--]--> java8æ–°ç‰¹æ€§ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åˆ†å¸ƒå¼"><span class="title">åˆ†å¸ƒå¼</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åˆ†å¸ƒå¼"><span class="title">åˆ†å¸ƒå¼</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/distributed/åˆ†å¸ƒå¼äº‹åŠ¡.md" class="" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡"><!--[--><!--]--> åˆ†å¸ƒå¼äº‹åŠ¡ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ•°æ®åº“"><span class="title">æ•°æ®åº“</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ•°æ®åº“"><span class="title">æ•°æ®åº“</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/db/mysql/1-MySQLå¸¸ç”¨çš„å‘½ä»¤.md" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/design-patterns/creational/1-å•ä¾‹æ¨¡å¼.md" class="" aria-label="è®¾è®¡æ¨¡å¼"><!--[--><!--]--> è®¾è®¡æ¨¡å¼ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/mq/" class="" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><!--[--><!--]--> æ¶ˆæ¯é˜Ÿåˆ— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/kayson/" class="router-link-active" aria-label="Kayson"><!--[--><!--]--> Kayson <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/seckill/" class="" aria-label="Seckill"><!--[--><!--]--> Seckill <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/jhzhou" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/jh-zhou0" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">kaysonç®¡ç†ç³»ç»Ÿ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/kayson/ç»Ÿä¸€å“åº”å’Œå¼‚å¸¸å¤„ç†ï¼ˆé”™è¯¯ç ï¼‰.md" class="sidebar-item" aria-label="ç»Ÿä¸€å“åº”å’Œå¼‚å¸¸å¤„ç†ï¼ˆé”™è¯¯ç ï¼‰"><!--[--><!--]--> ç»Ÿä¸€å“åº”å’Œå¼‚å¸¸å¤„ç†ï¼ˆé”™è¯¯ç ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/æ•°æ®åº“ Mybatis.md" class="sidebar-item" aria-label="æ•°æ®åº“ Mybatis"><!--[--><!--]--> æ•°æ®åº“ Mybatis <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/ç³»ç»Ÿæ—¥å¿—.md" class="sidebar-item" aria-label="ç³»ç»Ÿæ—¥å¿—"><!--[--><!--]--> ç³»ç»Ÿæ—¥å¿— <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/ç”¨æˆ·è®¤è¯.md" class="sidebar-item" aria-label="ç”¨æˆ·è®¤è¯"><!--[--><!--]--> ç”¨æˆ·è®¤è¯ <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/åŠŸèƒ½æƒé™.md" class="sidebar-item" aria-label="åŠŸèƒ½æƒé™"><!--[--><!--]--> åŠŸèƒ½æƒé™ <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/æ•°æ®æƒé™.md" class="sidebar-item" aria-label="æ•°æ®æƒé™"><!--[--><!--]--> æ•°æ®æƒé™ <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/SaaSå¤šç§Ÿæˆ·.md" class="sidebar-item" aria-label="SaaSå¤šç§Ÿæˆ·"><!--[--><!--]--> SaaSå¤šç§Ÿæˆ· <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/Redisç¼“å­˜.md" class="sidebar-item active" aria-label="Redisç¼“å­˜"><!--[--><!--]--> Redisç¼“å­˜ <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/æœ¬åœ°ç¼“å­˜.md" class="sidebar-item" aria-label="æœ¬åœ°ç¼“å­˜"><!--[--><!--]--> æœ¬åœ°ç¼“å­˜ <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/æ¶ˆæ¯é˜Ÿåˆ—.md" class="sidebar-item" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><!--[--><!--]--> æ¶ˆæ¯é˜Ÿåˆ— <!--[--><!--]--></a><!----></li><li><a href="/blog/kayson/å¹‚ç­‰æ€§ï¼ˆé˜²é‡å¤æäº¤ï¼‰.md" class="sidebar-item" aria-label="å¹‚ç­‰æ€§ï¼ˆé˜²é‡å¤æäº¤ï¼‰"><!--[--><!--]--> å¹‚ç­‰æ€§ï¼ˆé˜²é‡å¤æäº¤ï¼‰ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="redis-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#redis-ç¼“å­˜" aria-hidden="true">#</a> Redis ç¼“å­˜</h1><p><a href="https://gitee.com/jhzhou/kayson/tree/master/kayson-framework/kayson-spring-boot-starter-redis" target="_blank" rel="noopener noreferrer">kayson-spring-boot-starter-redis<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æŠ€æœ¯ç»„ä»¶ï¼Œä½¿ç”¨ Redis å®ç°ç¼“å­˜çš„åŠŸèƒ½ï¼Œå®ƒæœ‰ 2 ç§ä½¿ç”¨æ–¹å¼ï¼š</p><ul><li>ç¼–ç¨‹å¼ç¼“å­˜ï¼šåŸºäº Spring Data Redis æ¡†æ¶çš„ RedisTemplate æ“ä½œæ¨¡æ¿</li><li>å£°æ˜å¼ç¼“å­˜ï¼šåŸºäº Spring Cache æ¡†æ¶çš„ <code>@Cacheable</code> ç­‰ç­‰æ³¨è§£</li></ul><h2 id="_1-ç¼–ç¨‹å¼ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_1-ç¼–ç¨‹å¼ç¼“å­˜" aria-hidden="true">#</a> 1. ç¼–ç¨‹å¼ç¼“å­˜</h2><p>å¼•å…¥ä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.redisson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>redisson-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº Redisson æä¾›äº†åˆ†å¸ƒå¼é”ã€é˜Ÿåˆ—ã€é™æµç­‰ç‰¹æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨å®ƒä½œä¸º Spring Data Redis çš„å®¢æˆ·ç«¯ã€‚</p><h3 id="_1-1-spring-data-redis-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-1-spring-data-redis-é…ç½®" aria-hidden="true">#</a> 1.1 Spring Data Redis é…ç½®</h3><p>â‘  åœ¨ <code>application-local.yaml</code>é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ <code>spring.redis</code> é…ç½®é¡¹ï¼Œè®¾ç½® Redis çš„é…ç½®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/blog/kayson/Snipaste_2023-06-14_18-58-06.png" alt="Snipaste_2023-06-14_18-58-06"></p><p>â‘¡ åœ¨ KaysonRedisAutoConfiguration é…ç½®ç±»ï¼Œè®¾ç½®ä½¿ç”¨ JSON åºåˆ—åŒ– value å€¼ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> zjh - kayson
 */</span>
<span class="token annotation punctuation">@AutoConfiguration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KaysonRedisAutoConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">;</span>
    
    <span class="token doc-comment comment">/**
     * åˆ›å»º RedisTemplate Beanï¼Œä½¿ç”¨ JSON åºåˆ—åŒ–æ–¹å¼
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»º RedisTemplate å¯¹è±¡</span>
        <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½® RedisConnection å·¥å‚ã€‚ğŸ˜ˆ å®ƒå°±æ˜¯å®ç°å¤šç§ Java Redis å®¢æˆ·ç«¯æ¥å…¥çš„ç§˜å¯†å·¥å‚ã€‚</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä½¿ç”¨ String åºåˆ—åŒ–æ–¹å¼ï¼Œåºåˆ—åŒ– KEY</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä½¿ç”¨ JSON åºåˆ—åŒ–æ–¹å¼ï¼ˆåº“æ˜¯ Jackson ï¼‰ï¼Œåºåˆ—åŒ– VALUE</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2redis-key-å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_1-2redis-key-å®šä¹‰" aria-hidden="true">#</a> 1.2Redis Key å®šä¹‰</h3><p>é€šè¿‡ <a href="https://gitee.com/jhzhou/kayson/blob/master/kayson-framework/kayson-spring-boot-starter-redis/src/main/java/cn/zjh/kayson/framework/redis/core/RedisKeyDefine.java" target="_blank" rel="noopener noreferrer">RedisKeyDefine<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç±»å®šä¹‰ Redis Key</p><div class="custom-container tip"><p class="custom-container-title">æç¤º:</p><ul><li>â‘  å¦‚æœå€¼æ˜¯ã€ç®€å•ã€‘çš„ String æˆ–è€… Integer ç­‰ç±»å‹ï¼Œæ— éœ€åˆ›å»ºæ•°æ®å®ä½“ã€‚</li><li>â‘¡ å¦‚æœå€¼æ˜¯ã€å¤æ‚å¯¹è±¡ã€‘æ—¶ï¼Œå»ºè®®åœ¨ <code>dal/dataobject</code> åŒ…ä¸‹ï¼Œåˆ›å»ºå¯¹åº”çš„æ•°æ®å®ä½“ï¼Œä¾‹å¦‚è¯´è®¿é—®ä»¤ç‰Œ Access Token ç±» <a href="https://gitee.com/jhzhou/kayson/blob/master/kayson-module-system/kayson-module-system-biz/src/main/java/cn/zjh/kayson/module/system/dal/dataobject/oauth2/OAuth2AccessTokenDO.java" target="_blank" rel="noopener noreferrer">OAuth2AccessTokenDO<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</li></ul></div><h3 id="_1-3rediskeyconstants" tabindex="-1"><a class="header-anchor" href="#_1-3rediskeyconstants" aria-hidden="true">#</a> 1.3RedisKeyConstants</h3><div class="custom-container tip"><p class="custom-container-title">ä¸ºä»€ä¹ˆè¦å®šä¹‰ Redis Key å¸¸é‡ï¼Ÿ</p><p>æ¯ä¸ª <code>kayson-module-xxx</code> æ¨¡å—ï¼Œéƒ½æœ‰ä¸€ä¸ª RedisKeyConstants ç±»ï¼Œå®šä¹‰è¯¥æ¨¡å—çš„ Redis Key çš„ä¿¡æ¯ã€‚ç›®çš„æ˜¯ï¼Œé¿å… Redis Key æ•£è½åœ¨ Service ä¸šåŠ¡ä»£ç ä¸­ï¼Œåƒå¯¹å¾…æ•°æ®åº“çš„è¡¨ä¸€æ ·ï¼Œå¯¹å¾…æ¯ä¸ª Redis Keyã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦äº†è§£ä¸€ä¸ªæ¨¡å—çš„ Redis çš„ä½¿ç”¨æƒ…å†µï¼Œåªéœ€è¦æŸ¥çœ‹ RedisKeyConstants ç±»å³å¯ã€‚</p></div><p>åœ¨ <code>kayson-module-system</code> æ¨¡å—çš„ RedisKeyConstants ç±»ä¸­ï¼Œåˆ›å»ºäº† OAuth2AccessTokenDO å¯¹åº”çš„ Redis Key å®šä¹‰ <code>OAUTH2_ACCESS_TOKEN</code>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * System Redis Key æšä¸¾ç±»
 * 
 * <span class="token keyword">@author</span> zjh - kayson
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RedisKeyConstants</span> <span class="token punctuation">{</span>
    
    <span class="token class-name">RedisKeyDefine</span> <span class="token constant">OAUTH2_ACCESS_TOKEN</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisKeyDefine</span><span class="token punctuation">(</span><span class="token string">&quot;è®¿é—®ä»¤ç‰Œçš„ç¼“å­˜&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;oauth2_access_token:%s&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å‚æ•°ä¸ºè®¿é—®ä»¤ç‰Œ token</span>
            <span class="token class-name">RedisKeyDefine<span class="token punctuation">.</span>KeyTypeEnum</span><span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
            <span class="token class-name">OAuth2AccessTokenDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> 
            <span class="token class-name">RedisKeyDefine<span class="token punctuation">.</span>TimeoutTypeEnum</span><span class="token punctuation">.</span><span class="token constant">DYNAMIC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4oauth2accesstokenredisdao" tabindex="-1"><a class="header-anchor" href="#_1-4oauth2accesstokenredisdao" aria-hidden="true">#</a> 1.4OAuth2AccessTokenRedisDAO</h3><p>OAuth2AccessTokenRedisDAO ç±»ï¼Œæ˜¯ OAuth2AccessTokenDO çš„ RedisDAO å®ç°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> zjh - kayson
 */</span>
<span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2AccessTokenRedisDAO</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">StringRedisTemplate</span> stringRedisTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OAuth2AccessTokenDO</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> accessToken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> redisKey <span class="token operator">=</span> <span class="token function">formatKey</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>redisKey<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">OAuth2AccessTokenDO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">OAuth2AccessTokenDO</span> accessTokenDO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> redisKey <span class="token operator">=</span> <span class="token function">formatKey</span><span class="token punctuation">(</span>accessTokenDO<span class="token punctuation">.</span><span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¸…ç†å¤šä½™å­—æ®µï¼Œé¿å…ç¼“å­˜</span>
        accessTokenDO<span class="token punctuation">.</span><span class="token function">setUpdater</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCreator</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDeleted</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> time <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> accessTokenDO<span class="token punctuation">.</span><span class="token function">getExpiresTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>redisKey<span class="token punctuation">,</span> <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>accessTokenDO<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> accessToken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> redisKey <span class="token operator">=</span> <span class="token function">formatKey</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>redisKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> accessTokens<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> redisKeys <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">convertList</span><span class="token punctuation">(</span>accessTokens<span class="token punctuation">,</span> <span class="token class-name">OAuth2AccessTokenRedisDAO</span><span class="token operator">::</span><span class="token function">formatKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>redisKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">formatKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> accessToken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token constant">OAUTH2_ACCESS_TOKEN</span><span class="token punctuation">.</span><span class="token function">getKeyTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-5ä½¿ç”¨" aria-hidden="true">#</a> 1.5ä½¿ç”¨</h3><p>åªéœ€åœ¨ç±»ä¸­å¼•å…¥ OAuth2AccessTokenRedisDAO Beanï¼Œå°±å¯ä»¥éå¸¸ç®€æ´å¹²å‡€çš„è¿›è¡Œ OAuth2AccessTokenDO çš„ç¼“å­˜æ“ä½œï¼Œæ— éœ€å…³å¿ƒå…·ä½“çš„å®ç°ã€‚</p><p><img src="/blog/kayson/Snipaste_2023-06-14_19-14-37.png" alt="Snipaste_2023-06-14_19-14-37"></p><h2 id="_2-å£°æ˜å¼ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_2-å£°æ˜å¼ç¼“å­˜" aria-hidden="true">#</a> 2. å£°æ˜å¼ç¼“å­˜</h2><p>å¼•å…¥ä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸æ¯”æ¥è¯´ Spring Data Redis ç¼–ç¨‹å¼ç¼“å­˜ï¼ŒSpring Cache å£°æ˜å¼ç¼“å­˜çš„ä½¿ç”¨æ›´åŠ ä¾¿åˆ©ï¼Œä¸€ä¸ª <code>@Cacheable</code> æ³¨è§£å³å¯å®ç°ç¼“å­˜çš„åŠŸèƒ½ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#id&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">UserDO</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-spring-cache-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-1-spring-cache-é…ç½®" aria-hidden="true">#</a> 2.1 Spring Cache é…ç½®</h3><p>â‘  åœ¨ application.yaml é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ spring.redis é…ç½®é¡¹ï¼Œè®¾ç½® Redis çš„é…ç½®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/blog/kayson/Snipaste_2023-06-14_19-17-30.png" alt="Snipaste_2023-06-14_19-17-30"></p><p>â‘¡ åœ¨ KaysonCacheAutoConfiguration é…ç½®ç±»ï¼Œè®¾ç½®ä½¿ç”¨ JSON åºåˆ—åŒ– value å€¼ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Cache é…ç½®ç±»ï¼ŒåŸºäº Redis å®ç°
 * 
 * <span class="token keyword">@author</span> zjh - kayson
 */</span>
<span class="token annotation punctuation">@AutoConfiguration</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">CacheProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableCaching</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KaysonCacheAutoConfiguration</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * RedisCacheConfiguration Bean
     *
     * å‚è€ƒ <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">#</span><span class="token field">createConfiguration</span></span><span class="token punctuation">}</span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisCacheConfiguration</span> <span class="token function">redisCacheConfiguration</span><span class="token punctuation">(</span><span class="token class-name">CacheProperties</span> cacheProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è®¾ç½®ä½¿ç”¨ JSON åºåˆ—åŒ–æ–¹å¼</span>
        <span class="token class-name">RedisCacheConfiguration</span> config <span class="token operator">=</span> <span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">.</span><span class="token function">defaultCacheConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">serializeValuesWith</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializationContext<span class="token punctuation">.</span>SerializationPair</span><span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializer</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½® CacheProperties.Redis çš„å±æ€§</span>
        <span class="token class-name">CacheProperties<span class="token punctuation">.</span>Redis</span> redisProperties <span class="token operator">=</span> cacheProperties<span class="token punctuation">.</span><span class="token function">getRedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>redisProperties<span class="token punctuation">.</span><span class="token function">getTimeToLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            config <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">entryTtl</span><span class="token punctuation">(</span>redisProperties<span class="token punctuation">.</span><span class="token function">getTimeToLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>redisProperties<span class="token punctuation">.</span><span class="token function">getKeyPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            config <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">prefixCacheNameWith</span><span class="token punctuation">(</span>redisProperties<span class="token punctuation">.</span><span class="token function">getKeyPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>redisProperties<span class="token punctuation">.</span><span class="token function">isCacheNullValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            config <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">disableCachingNullValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>redisProperties<span class="token punctuation">.</span><span class="token function">isUseKeyPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            config <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">disableKeyPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> config<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-å¸¸è§æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_2-2-å¸¸è§æ³¨è§£" aria-hidden="true">#</a> 2.2 å¸¸è§æ³¨è§£</h3><h4 id="_2-2-1-cacheable-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_2-2-1-cacheable-æ³¨è§£" aria-hidden="true">#</a> 2.2.1 @Cacheable æ³¨è§£</h4><p><a href="https://github.com/spring-projects/spring-framework/blob/main/spring-context/src/main/java/org/springframework/cache/annotation/Cacheable.java" target="_blank" rel="noopener noreferrer"><code>@Cacheable</code> <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ³¨è§£ï¼šæ·»åŠ åœ¨æ–¹æ³•ä¸Šï¼Œç¼“å­˜æ–¹æ³•çš„æ‰§è¡Œç»“æœã€‚æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>1ï¼‰é¦–å…ˆï¼Œåˆ¤æ–­æ–¹æ³•æ‰§è¡Œç»“æœçš„ç¼“å­˜ã€‚å¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥ç¼“å­˜ç»“æœã€‚</li><li>2ï¼‰ç„¶åï¼Œæ‰§è¡Œæ–¹æ³•ï¼Œè·å¾—æ–¹æ³•ç»“æœã€‚</li><li>3ï¼‰ä¹‹åï¼Œæ ¹æ®æ˜¯å¦æ»¡è¶³ç¼“å­˜çš„æ¡ä»¶ã€‚å¦‚æœæ»¡è¶³ï¼Œåˆ™ç¼“å­˜æ–¹æ³•ç»“æœåˆ°ç¼“å­˜ã€‚</li><li>4ï¼‰æœ€åï¼Œè¿”å›æ–¹æ³•ç»“æœã€‚</li></ul><h4 id="_2-2-2-cacheput-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_2-2-2-cacheput-æ³¨è§£" aria-hidden="true">#</a> 2.2.2 @CachePut æ³¨è§£</h4><p><a href="https://github.com/spring-projects/spring-framework/blob/main/spring-context/src/main/java/org/springframework/cache/annotation/CachePut.java" target="_blank" rel="noopener noreferrer"><code>@CachePut</code> <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ³¨è§£ï¼Œæ·»åŠ åœ¨æ–¹æ³•ä¸Šï¼Œç¼“å­˜æ–¹æ³•çš„æ‰§è¡Œç»“æœã€‚ä¸åŒäº <code>@Cacheable</code> æ³¨è§£ï¼Œå®ƒçš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>1ï¼‰é¦–å…ˆï¼Œæ‰§è¡Œæ–¹æ³•ï¼Œè·å¾—æ–¹æ³•ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºæ˜¯å¦æœ‰ç¼“å­˜ï¼Œéƒ½ä¼šæ‰§è¡Œæ–¹æ³•ã€‚</li><li>2ï¼‰ç„¶åï¼Œæ ¹æ®æ˜¯å¦æ»¡è¶³ç¼“å­˜çš„æ¡ä»¶ã€‚å¦‚æœæ»¡è¶³ï¼Œåˆ™ç¼“å­˜æ–¹æ³•ç»“æœåˆ°ç¼“å­˜ã€‚</li><li>3ï¼‰æœ€åï¼Œè¿”å›æ–¹æ³•ç»“æœã€‚</li></ul><h4 id="_2-2-3-cacheevict-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_2-2-3-cacheevict-æ³¨è§£" aria-hidden="true">#</a> 2.2.3 @CacheEvict æ³¨è§£</h4><p><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/java/org/springframework/cache/annotation/CacheEvict.java" target="_blank" rel="noopener noreferrer"><code>@CacheEvict</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ³¨è§£ï¼Œæ·»åŠ åœ¨æ–¹æ³•ä¸Šï¼Œåˆ é™¤ç¼“å­˜ã€‚</p><h3 id="_2-3ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-3ä½¿ç”¨" aria-hidden="true">#</a> 2.3ä½¿ç”¨</h3><p><img src="/blog/kayson/Snipaste_2023-06-14_19-21-44.png" alt="Snipaste_2023-06-14_19-21-44"></p><ul><li>ã€è¢«åŠ¨è¯»ã€‘ç›¸å¯¹èƒ½å¤Ÿä¿è¯ Redis ä¸ MySQL çš„ä¸€è‡´æ€§</li><li>ç»å¤§æ•°æ•°æ®ä¸éœ€è¦æ”¾åˆ° Redis ç¼“å­˜ä¸­ï¼Œé‡‡ç”¨ã€ä¸»åŠ¨å†™ã€‘ä¼šå°†éå¿…è¦çš„æ•°æ®è¿›è¡Œç¼“å­˜</li></ul><div class="custom-container tip"><p class="custom-container-title">å‹æƒ…æç¤ºï¼š</p><p>å¦‚æœä½ æœªå­¦ä¹ è¿‡ MySQL ä¸ Redis ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œå¯ä»¥åç»­é˜…è¯» <a href="https://www.iocoder.cn/Fight/How-Redis-and-MySQL-double-write-consistency-guarantee/?yudao" target="_blank" rel="noopener noreferrer">ã€ŠRedis ä¸ MySQL åŒå†™ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ ã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ–‡ç« ã€‚</p></div><h3 id="_2-4-è¿‡æœŸæ—¶é—´" tabindex="-1"><a class="header-anchor" href="#_2-4-è¿‡æœŸæ—¶é—´" aria-hidden="true">#</a> 2.4 è¿‡æœŸæ—¶é—´</h3><p>Spring Cache é»˜è®¤ä½¿ç”¨ <code>spring.cache.redis.time-to-live</code> é…ç½®é¡¹ï¼Œè®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œé¡¹ç›®é»˜è®¤ä¸º 1 å°æ—¶ã€‚</p><p>å¦‚æœä½ æƒ³è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´ï¼Œå¯å‚è€ƒ <a href="https://juejin.cn/post/7102222578026020871" target="_blank" rel="noopener noreferrer">ã€ŠSpring @Cacheable æ‰©å±•æ”¯æŒè‡ªå®šä¹‰è¿‡æœŸæ—¶é—´ ã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ–‡ç« ã€‚</p><h2 id="_3-redis-ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#_3-redis-ç›‘æ§" aria-hidden="true">#</a> 3. Redis ç›‘æ§</h2><p>kayson-module-infra çš„ redis æ¨¡å—ä¸­ <a href="https://gitee.com/jhzhou/kayson/blob/master/kayson-module-infra/kayson-module-infra-biz/src/main/java/cn/zjh/kayson/module/infra/controller/admin/redis/RedisController.java" target="_blank" rel="noopener noreferrer">RedisController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œæä¾›äº† Redis ç›‘æ§çš„åŠŸèƒ½ã€‚</p><p>ç‚¹å‡» [åŸºç¡€è®¾æ–½ -&gt; Redis ç›‘æ§] èœå•ï¼Œå¯ä»¥æŸ¥çœ‹åˆ° Redis çš„åŸºç¡€ä¿¡æ¯ã€å‘½ä»¤ç»Ÿè®¡ã€å†…å­˜ä¿¡æ¯ã€‚</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-66d6b4fd.js" defer></script>
  </body>
</html>
